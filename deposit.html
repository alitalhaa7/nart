<!DOCTYPE HTML>
<html>

<head>
    <title>Assignment 2</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>


<body>
    <style>
        .dropbtn {
    background-color: #3498DB;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}
        .bluebutton{
            height:60px;
        }

.dropbtn:hover, .dropbtn:focus {
    background-color: #2980B9;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    min-width: 160px;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown a:hover {background-color: #ddd;}

.show {display: block;}
</style>
    <div id="success">

        <table class="navtable">
            <tr>

                <td style="width:80%;text-align:left;font-size:30px;font-weight:bold;font-family: Verdana;"> <a style="text-decoration:underline;color:white;" href="./success.html">&#8249;NART</a></td>
                <td style="width:20%;text-align:right;"><a style="text-decoration:none; font-size:15px;font-family: Arial; color:white;" href="./endsession.html"> SIGN OUT <img src="signout.png" width="25px"> </a></td>

            </tr>

        </table>
        
        <div id = "options">
        <h1 >DEPOSIT</h1>
            </div>

        <table class="navtable">
            <tr>

                <td>
                    <div class="dropdown">
                        <button onclick="myFunction()" style="width:250px;height:60px;" class="dropbtn"> <span id="dropdownselection"> Chequing </span> <span id="cheamount"></span> <img src="drop-down-arrow-01-512.png" width="20px;"></button>
                        <div onclick="switchdropdownvalues()" id="myDropdown" class="dropdown-content">
                            <a href="#home"> <span id="dropdownalt">Savings </span> <span id="savamount"></span></a>

                        </div>
                    </div>
                </td>



            </tr>

        </table>

        <p style="visibility:hidden;color:white;font-family:Arial;font-weight:bold;;font-size:30px;width:600px;margin-left:auto;margin-right:auto;background-color:#ed116c" id="errordeposit">Please Select Deposit Type</p>

        <div id="withdraw-righthandside" style="float:left;border-right: 1px solid white;">


                 <br>
                <br>

            <h1 style=" font-size:20px;color:white;font-family:arial;margin-left:auto;margin-right:auto;">Select Deposit Type:</h1>

            <table style="margin-left:auto;margin-right:auto;">
                <tr>
                    <td id="cash" onclick="depositSelectCash(this)" style="width:300px;height:100px;text-align:center;">
                        <h1 style="color:white;font-size:30px;font-family:arial;">Cash</h1>
                    </td>
                </tr>
                <br>
                <tr>
                    <td id="cheque" onclick=" depositSelectCheque(this)" style="width:300px;height:100px;text-align:center;">
                        <h1 style="color:white;font-size:30px;font-family:arial;">Cheque</h1>
                    </td>
                </tr>
                <br>
                <br>
               
            </table>
            <br>
            <br>

        </div>

        <br>
        <div id="withdraw-righthandside">
            <h1 style=" font-size:20px;color:white;font-family:arial;margin-left:auto;margin-right:auto;">Deposit Amount</h1>

            <input type="text" id="withdrawinput" style="margin-left:auto;margin-right:auto; font-size:40px;">
            <table style="margin-left:auto;margin-right:auto;">
                <tr>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">1</button>
                    </td>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">2</button>

                    </td>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">3</button>

                    </td>
                </tr>
                <tr>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">4</button>
                    </td>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">5</button>

                    </td>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">6</button>

                    </td>
                </tr>
                <tr>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">7</button>
                    </td>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">8</button>

                    </td>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">9</button>

                    </td>
                </tr>
                <tr>
                    <td>
                        <button onclick="deleteall()" class="bluebutton" style="background-color: orange">Reset
                            <br>
                            <img src="clear.png" style=" width:30%">

                        </button>
                    </td>
                    <td>
                        <button onclick="withdrawamountinput(this)" class="bluebutton">0</button>
                    </td>
                    <td>
                        <button onclick="deleteone()" class="bluebutton" style="background-color: red">Delete
                            <br>
                            <img src="backspace.png" style=" width:30%">
                        </button>
                    </td>
                </tr>
            </table>


        </div>

        <button onclick="withdrawfunc()" style="width:100%;height:75px;background-color:#42f474;font-size:20px;text-align:center;font-family:Arial;color:white.font-weight:bold;bottom:0;position:absolute;left:0">DEPOSIT</button>

    </div>

    </div>

    <!-- Trigger/Open The Modal -->

    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <br>
            <br>
            <br>
            <h1> Deposit <span id="withdrawamount"></span> into <span id="accountvar"></span>? </h1>
            <br>
            <button onclick="closeModal(this)" class="greenbutton" style="display:inline"> YES </button>
            <button onclick="closeModal(this)" class="redbutton" style="display:inline"> NO </button>

        </div>

    </div>

    <script src="script.js"></script>

    <script>
        var withdrawamount = "";
        var modal = document.getElementById('myModal');
        var chequingamount = window.sessionStorage.getItem('chequingVal');
        var savingsamount = window.sessionStorage.getItem('savingsVal');
        var typeOfInsert = "";
        // Get the button that opens the modal

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];



        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }






        // function closeModal(x) {

        //     if (x.innerHTML === "YES") {
        //         window.location.href = "./deposit_success.html";

        //     }
        //     modal.style.display = "none";



        // }

        function closeModal(x) {
            var dropdownselection = document.getElementById('dropdownselection').innerHTML;
            console.log(dropdownselection);
            if (x.className === "greenbutton") {
                var transactions = JSON.parse(window.sessionStorage.getItem('transactions'));
                console.log("greenbutton pressed");
                if (dropdownselection.trim() === 'Chequing'){
                    console.log("dropdown equals chequings");
                    var newchequingbalance = parseInt(chequingamount) + parseInt(withdrawamount);
                    console.log(newchequingbalance);
                    window.sessionStorage.setItem('chequingVal',newchequingbalance);

                    var newDeposit = {
                        action: "Deposit",
                        account: "Chequing",
                        amount: withdrawamount,
                        balance: newchequingbalance
                    }
                    transactions.push(newDeposit);
                    window.sessionStorage.setItem("transactions", JSON.stringify(transactions));


                }else{
                    console.log("dropdown equals savings");
                    var newsavingsbalance = parseInt(savingsamount) + parseInt(withdrawamount);
                    window.sessionStorage.setItem('savingsVal',newsavingsbalance);
                
                    var newDeposit = {
                        action: "Deposit",
                        account: "Savings",
                        amount: withdrawamount,
                        balance: newsavingsbalance
                    }
                    transactions.push(newDeposit);
                    window.sessionStorage.setItem("transactions", JSON.stringify(transactions));


                }
                console.log(document.getElementById("cash").style.backgroundColor);
               if(typeOfInsert === "Cash"){
                    window.location.href = "./deposit_insertcash.html";
               }
               else if (typeOfInsert === "Cheque"){
                    window.location.href = "./deposit_insertcheque.html";
               }
            }else if (this.class = "redbutton"){
                console.log("redbutton pressed")
            }
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }





        function depositSelectCash(x) {
            console.log("cash");
            typeOfInsert = "Cash";
            document.getElementById("errordeposit").style = "visibility:hidden;color:white;font-family:Arial;font-weight:bold;display:block;font-size:30px;width:500px;margin-left:auto;margin-right:auto;background-color:#ed116c";
            document.getElementById("cash").style.backgroundColor = "#224191";
            document.getElementById("cheque").style.backgroundColor = "#224191";
            x.style.backgroundColor = "#30b0e6";
        }

        function depositSelectCheque(x) {
            console.log("cheque");
            typeOfInsert = "Cheque";
            document.getElementById("errordeposit").style = "visibility:hidden;color:white;font-family:Arial;font-weight:bold;display:block;font-size:30px;width:500px;margin-left:auto;margin-right:auto;background-color:#ed116c";
            document.getElementById("cheque").style.backgroundColor = "#224191";
            document.getElementById("cash").style.backgroundColor = "#224191";
            x.style.backgroundColor = "#30b0e6";
        }

        function withdrawamountinput(x) {
            if (!document.getElementById('withdrawinput').value && document.getElementById('withdrawinput').value !=='0' ){
                document.getElementById("errordeposit").style = "visibility:hidden;color:white;font-family:Arial;font-weight:bold;display:block;font-size:30px;width:500px;margin-left:auto;margin-right:auto;background-color:#ed116c";
            }
            if (withdrawamount.length < 5) {
                withdrawamount += x.innerHTML;
                document.getElementById('withdrawinput').value = withdrawamount;
            }
        }

        function deleteone() {
            withdrawamount = withdrawamount.slice(0, -1);

            if (!document.getElementById('withdrawinput').innerHTML){
                document.getElementById("errordeposit").style = "visibility:hidden;color:white;font-family:Arial;font-weight:bold;display:block;font-size:30px;width:500px;margin-left:auto;margin-right:auto;background-color:#ed116c";

            }
            document.getElementById('withdrawinput').value = withdrawamount;

        }

        function deleteall() {
            withdrawamount = "";
            document.getElementById("errordeposit").style = "visibility:hidden;color:white;font-family:Arial;font-weight:bold;display:block;font-size:30px;width:500px;margin-left:auto;margin-right:auto;background-color:#ed116c";
            document.getElementById('withdrawinput').value = withdrawamount;

        }

        function withdrawfunc() {
            console.log(withdrawamount);
            console.log(typeOfInsert);
            if(withdrawamount && withdrawamount !== '0' && withdrawamount !== '00' && withdrawamount !== '000' && withdrawamount !== '0000' && withdrawamount !== '00000' && typeOfInsert !== ''){
                modal.style.display = "block";
                document.getElementById("withdrawamount").innerHTML = "$" + withdrawamount;

                document.getElementById("accountvar").innerHTML = document.getElementById("dropdownselection").innerHTML;

            }else if (typeOfInsert === ''){
                document.getElementById("errordeposit").innerHTML = "Please Select Deposit Type";
                document.getElementById("errordeposit").style = "visibility:visible;color:white;font-family:Arial;font-weight:bold;display:block;font-size:30px;width:500px;margin-left:auto;margin-right:auto;background-color:#ed116c";

            }else if (!withdrawamount || withdrawamount === '0'|| withdrawamount !== '00' || withdrawamount !== '000' || withdrawamount !== '0000' || withdrawamount !== '00000'){
                console.log("ime here")
                document.getElementById("errordeposit").innerHTML = "Please Enter Valid Amount";
                document.getElementById("errordeposit").style = "visibility:visible;color:white;font-family:Arial;font-weight:bold;display:block;font-size:30px;width:500px;margin-left:auto;margin-right:auto;background-color:#ed116c";

            }
        }


        function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
        }

        // Close the dropdown if the user clicks outside of it
        window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {

                var dropdowns = document.getElementsByClassName("dropdown-content");
                var i;
                for (i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

      
        document.getElementById("cheamount").innerHTML = "$" + chequingamount;
        document.getElementById("savamount").innerHTML = "$" + savingsamount;

        function switchdropdownvalues() {
            var x = document.getElementById("dropdownalt").innerHTML;
            var y = document.getElementById("savamount").innerHTML;
            console.log(x);
            console.log(y);
            document.getElementById("dropdownalt").innerHTML = document.getElementById("dropdownselection").innerHTML;
            document.getElementById("savamount").innerHTML = document.getElementById("cheamount").innerHTML;
            
            document.getElementById("dropdownselection").innerHTML = x;
            document.getElementById("cheamount").innerHTML = y;
        }

    </script>

</body>






</html>
